{#
  milestone_rows.html â€” HTMX fragment: milestone list rows.

  Returned by milestones_list_page() when HX-Request header is present.
  Also included by milestones_list.html on full-page load.

  Required context variables:
    milestones  list[MilestoneResponse]  â€” milestones to render
    state       str                      â€” active state filter (open|closed|all)
    base_url    str                      â€” canonical UI base URL for this repo
#}
{% if milestones %}
  {% for ms in milestones %}
  {% set total = ms.open_issues + ms.closed_issues %}
  {% set pct = ((ms.closed_issues / total * 100) | int) if total > 0 else 0 %}
  <div class="milestone-row">
    <div class="milestone-title-row">
      <a href="{{ base_url }}/milestones/{{ ms.number }}" class="milestone-title-link">
        {{ ms.title }}
      </a>
      <span class="badge {% if ms.state == 'open' %}badge-open{% else %}badge-closed{% endif %}">
        {{ ms.state }}
      </span>
    </div>
    <div class="milestone-meta">
      #{{ ms.number }}
      &bull; {{ ms.open_issues }} open &bull; {{ ms.closed_issues }} closed
      {% if ms.due_on %}
        &bull; <span class="milestone-due">ðŸ“… Due {{ ms.due_on.strftime('%b %d, %Y') }}</span>
      {% endif %}
      {% if ms.description %}
        â€” {{ ms.description[:80] }}{% if ms.description | length > 80 %}â€¦{% endif %}
      {% endif %}
    </div>
    <div class="milestone-progress-wrap">
      <div class="milestone-progress-bar-track">
        <div class="milestone-progress-bar-fill" style="width:{{ pct }}%"></div>
      </div>
      <div class="milestone-progress-label">{{ pct }}% complete</div>
    </div>
  </div>
  {% endfor %}
{% else %}
  <p class="milestone-empty">No {{ state }} milestones.</p>
{% endif %}
