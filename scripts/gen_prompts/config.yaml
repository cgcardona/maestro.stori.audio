# Pipeline Prompt Generator — single source of truth
#
# Edit this file, then regenerate all prompt files:
#   docker compose exec maestro python3 /app/scripts/gen_prompts/generate.py
#
# To sync GitHub labels after changing the labels section:
#   bash scripts/gen_prompts/sync_labels.sh          (auto-generated by generate.py)
#
# All .cursor/roles/*.md and .cursor/PARALLEL_*.md files are generated from
# the templates in scripts/gen_prompts/templates/. Never edit the generated
# files directly — edits will be overwritten on the next generate run.

repo:
  gh_slug: "cgcardona/maestro"   # GitHub org/repo — never derived from local path
  name: "maestro"                 # used in worktree subfolder names

pipeline:
  claim_label: "agent:wip"
  max_pool_size: 4               # concurrent leaf agents per VP run

  # Strict phase order — CTO and chain-spawn iterate this list top to bottom.
  # To switch projects, replace the entire phases list and update `codebases.active`.
  phases:
    - "agentception/0-scaffold"
    - "agentception/1-controls"
    - "agentception/2-telemetry"
    - "agentception/3-roles"
    - "agentception/4-intelligence"
    - "agentception/5-scaling"
    - "agentception/6-generalization"

codebases:
  # Which codebase agents are currently working on.
  # Determines which mypy/test commands are used in IS_AC routing.
  active: "agentception"

  agentception:
    container: "agentception"
    mypy: "docker compose exec agentception mypy /app/agentception/"
    test_dir: "agentception/tests"
    test_glob: "agentception/tests/test_*.py"
    label_prefix: "agentception/"

  maestro:
    container: "maestro"
    mypy: >-
      docker compose exec maestro sh -c
      "PYTHONPATH=/worktrees/$WTNAME mypy /worktrees/$WTNAME/maestro/ /worktrees/$WTNAME/tests/"
    test_dir: "tests"
    test_glob: "tests/test_*.py"
    label_prefix: "maestro/"

# ─────────────────────────────────────────────────────────────────────────────
# GitHub Labels — single source of truth for all pipeline labels.
#
# Running generate.py emits scripts/gen_prompts/sync_labels.sh.
# Run that script once to create/update all labels in GitHub:
#   bash scripts/gen_prompts/sync_labels.sh
#
# Colors are hex without the leading #.
# ─────────────────────────────────────────────────────────────────────────────
labels:

  # ── Claim label ────────────────────────────────────────────────────────────
  # The only label agents write at runtime. Kept here so sync_labels.sh
  # can ensure it exists with the right color and description.
  claim:
    name: "agent:wip"
    color: "0075ca"
    description: "Claimed by a pipeline agent — do not assign manually"

  # ── Active project parent label ────────────────────────────────────────────
  # Top-level label that scopes all work for the current active codebase.
  # Update this block when switching projects.
  project:
    name: "agentception"
    color: "7c3aed"
    description: "AgentCeption multi-tier agent pipeline dashboard"

  # ── Phase labels ────────────────────────────────────────────────────────────
  # Must stay in sync with pipeline.phases above (same names, same order).
  # The CTO and chain-spawn logic iterate phases strictly top-to-bottom.
  # Adding a new phase: add it to pipeline.phases AND here, then re-run generate.py.
  phases:
    - name: "agentception/0-scaffold"
      color: "1e40af"
      description: "AgentCeption Phase 0 — core scaffold, readers, poller, MVP UI (sequential)"
    - name: "agentception/1-controls"
      color: "1d4ed8"
      description: "AgentCeption Phase 1 — kill/pause/spawn control plane"
    - name: "agentception/2-telemetry"
      color: "0e7490"
      description: "AgentCeption Phase 2 — wave history, cost estimation, timeline"
    - name: "agentception/3-roles"
      color: "065f46"
      description: "AgentCeption Phase 3 — role studio, inline editor, pipeline-config.json"
    - name: "agentception/4-intelligence"
      color: "92400e"
      description: "AgentCeption Phase 4 — dependency DAG, stale claim detector, ticket analyzer"
    - name: "agentception/5-scaling"
      color: "991b1b"
      description: "AgentCeption Phase 5 — auto-scaling advisor, A/B role testing"
    - name: "agentception/6-generalization"
      color: "4c1d95"
      description: "AgentCeption Phase 6 — multi-repo support, template marketplace, standalone repo"

  # ── Utility / triage labels ────────────────────────────────────────────────
  # Standard labels used across issues and PRs. Kept here for completeness
  # so a fresh repo can be fully bootstrapped with one sync_labels.sh run.
  utility:
    - name: "bug"
      color: "d73a4a"
      description: "Something isn't working"
    - name: "enhancement"
      color: "a2eeef"
      description: "New feature or request"
    - name: "documentation"
      color: "0075ca"
      description: "Improvements or additions to documentation"
    - name: "testing"
      color: "10b981"
      description: "Test coverage — unit, integration, e2e"
    - name: "mypy"
      color: "0ea5e9"
      description: "Type errors or mypy compliance required"
    - name: "good first issue"
      color: "7057ff"
      description: "Good for newcomers"
    - name: "help wanted"
      color: "008672"
      description: "Extra attention is needed"
    - name: "duplicate"
      color: "cfd3d7"
      description: "This issue or pull request already exists"
    - name: "wontfix"
      color: "ffffff"
      description: "This will not be worked on"
